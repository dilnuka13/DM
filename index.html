<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dream Makers T-Shirt Order</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Supabase -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    
    <!-- Framer Motion -->
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- PDF & Canvas Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a;
            color: white;
            overflow-x: hidden;
        }
        
        /* Elegant Glassmorphism */
        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.2);
        }

        .glass-input {
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
        }
        .glass-input:focus {
            border-color: #3b82f6;
            background: rgba(15, 23, 42, 0.8);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #0f172a; 
        }
        ::-webkit-scrollbar-thumb {
            background: #334155; 
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #475569; 
        }

        .logo-glow {
            filter: drop-shadow(0 0 15px rgba(59, 130, 246, 0.3));
        }

        /* Hidden Factory Table for Capture */
        #factory-table-capture {
            position: absolute;
            left: -9999px;
            top: 0;
            width: 800px;
            background: white;
            color: black;
            padding: 40px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { motion, AnimatePresence } = window.Motion;
        const { createClient } = window.supabase;
        const { jsPDF } = window.jspdf;

        // --- Supabase Config ---
        const supabaseUrl = 'https://pzdylknzflmbigvyrmnu.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB6ZHlsa256ZmxtYmlndnlybW51Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU0Mjg2MDMsImV4cCI6MjA4MTAwNDYwM30.Ldp0ZaWEoU-aUws0jaoGihyXs43snnEKOhwmIoumx5c';
        const supabase = createClient(supabaseUrl, supabaseKey);

        const LOGO_URL = "https://dilnuka13.github.io/DM/1750483906074.jpg";

        // --- Utils: Convert Image to Base64 for PDF ---
        const getBase64ImageFromURL = (url) => {
            return new Promise((resolve, reject) => {
                const img = new Image();
                img.crossOrigin = "Anonymous";
                img.src = url;
                img.onload = () => {
                    const canvas = document.createElement("canvas");
                    canvas.width = img.width;
                    canvas.height = img.height;
                    const ctx = canvas.getContext("2d");
                    ctx.drawImage(img, 0, 0);
                    const dataURL = canvas.toDataURL("image/jpeg");
                    resolve(dataURL);
                };
                img.onerror = error => reject(error);
            });
        };

        // --- Icons ---
        const Icons = {
            Plus: () => <i data-lucide="plus" className="w-5 h-5"></i>,
            List: () => <i data-lucide="list" className="w-5 h-5"></i>,
            Save: () => <i data-lucide="save" className="w-5 h-5"></i>,
            Download: () => <i data-lucide="download" className="w-4 h-4"></i>,
            FileText: () => <i data-lucide="file-text" className="w-4 h-4"></i>,
            Image: () => <i data-lucide="image" className="w-4 h-4"></i>,
            Sheet: () => <i data-lucide="table" className="w-4 h-4"></i>,
            Scissors: () => <i data-lucide="scissors" className="w-4 h-4"></i>,
        };

        // --- App Component ---
        function App() {
            const [view, setView] = useState('form'); 

            useEffect(() => {
                lucide.createIcons();
            });

            return (
                <div className="min-h-screen relative overflow-hidden bg-[#0f172a] text-slate-200 pb-20 font-sans">
                    
                    {/* Background Elements */}
                    <div className="fixed inset-0 overflow-hidden pointer-events-none">
                        <div className="absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-blue-900/20 rounded-full blur-[100px]"></div>
                        <div className="absolute bottom-[-10%] right-[-10%] w-[500px] h-[500px] bg-indigo-900/20 rounded-full blur-[100px]"></div>
                    </div>

                    <div className="relative container mx-auto px-4 py-6 max-w-5xl z-10">
                        
                        {/* Header Area */}
                        <motion.div 
                            initial={{ y: -30, opacity: 0 }}
                            animate={{ y: 0, opacity: 1 }}
                            className="flex flex-col md:flex-row items-center justify-center gap-6 mb-10 mt-4"
                        >
                            <div className="relative group">
                                <div className="absolute inset-0 bg-blue-500 rounded-full blur opacity-20 group-hover:opacity-40 transition-opacity duration-500"></div>
                                <img 
                                    src={LOGO_URL} 
                                    alt="Dream Makers Logo" 
                                    className="w-24 h-24 md:w-28 md:h-28 rounded-full border-2 border-slate-700/50 shadow-2xl logo-glow relative z-10 object-cover"
                                />
                            </div>
                            
                            <div className="text-center md:text-left">
                                <h1 className="text-4xl md:text-5xl font-extrabold tracking-tight text-white mb-2">
                                    <span className="bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-indigo-400">Dream Makers</span>
                                </h1>
                                <p className="text-slate-400 text-sm md:text-base tracking-[0.2em] uppercase font-medium border-b border-slate-800 pb-2 inline-block">
                                    Sport & Youth Club
                                </p>
                                <p className="text-slate-500 text-xs mt-2 font-mono">T-Shirt Order Management System v2.0</p>
                            </div>
                        </motion.div>

                        {/* Navigation Tabs */}
                        <div className="flex justify-center mb-8">
                            <div className="bg-slate-800/50 p-1 rounded-full border border-slate-700/50 flex gap-2 backdrop-blur-sm">
                                <NavButton active={view === 'form'} onClick={() => setView('form')} icon={<Icons.Plus/>}>
                                    New Order
                                </NavButton>
                                <NavButton active={view === 'list'} onClick={() => setView('list')} icon={<Icons.List/>}>
                                    Order List
                                </NavButton>
                            </div>
                        </div>

                        {/* Content Area */}
                        <AnimatePresence mode="wait">
                            {view === 'form' ? (
                                <OrderForm key="form" setView={setView} />
                            ) : (
                                <OrderList key="list" />
                            )}
                        </AnimatePresence>

                    </div>
                </div>
            );
        }

        // --- Clean Nav Button ---
        function NavButton({ active, onClick, children, icon }) {
            return (
                <button 
                    onClick={onClick}
                    className={`flex items-center gap-2 px-6 py-2.5 rounded-full text-sm font-medium transition-all duration-300 ${
                        active 
                        ? 'bg-slate-700 text-white shadow-md' 
                        : 'text-slate-400 hover:text-white hover:bg-slate-800'
                    }`}
                >
                    {icon}
                    {children}
                </button>
            );
        }

        // --- Order Form ---
        function OrderForm({ setView }) {
            const [loading, setLoading] = useState(false);
            const [formData, setFormData] = useState({
                name: '',
                size: 'M',
                paymentType: 'full', 
                advanceOption: '700',
                customAmount: '',
            });
            const [msg, setMsg] = useState(null);

            const handleChange = (e) => {
                const { name, value } = e.target;
                setFormData(prev => ({ ...prev, [name]: value }));
            };

            const handleSubmit = async (e) => {
                e.preventDefault();
                setLoading(true);
                setMsg(null);

                let finalAmount = 0;
                // Default full price logic (placeholder)
                if (formData.paymentType === 'full') {
                    finalAmount = 1500; 
                } else {
                    if (formData.advanceOption === '700') finalAmount = 700;
                    else finalAmount = parseFloat(formData.customAmount) || 0;
                }

                try {
                    const { error } = await supabase
                        .from('orders')
                        .insert([{
                            name: formData.name,
                            size: formData.size,
                            payment_type: formData.paymentType,
                            amount: finalAmount
                        }]);

                    if (error) throw error;

                    setMsg({ type: 'success', text: 'Order Registered Successfully!' });
                    setFormData({ name: '', size: 'M', paymentType: 'full', advanceOption: '700', customAmount: '' });
                    
                    setTimeout(() => setView('list'), 1500);

                } catch (err) {
                    console.error(err);
                    setMsg({ type: 'error', text: 'Error Registering Data!' });
                } finally {
                    setLoading(false);
                }
            };

            return (
                <motion.div 
                    initial={{ y: 20, opacity: 0 }}
                    animate={{ y: 0, opacity: 1 }}
                    exit={{ y: -20, opacity: 0 }}
                    className="glass-panel rounded-2xl p-8 max-w-2xl mx-auto"
                >
                    <h2 className="text-xl font-semibold mb-6 text-slate-200 flex items-center gap-2">
                        <span className="w-1 h-6 bg-blue-500 rounded-full"></span>
                        Enter New Order
                    </h2>
                    
                    <form onSubmit={handleSubmit} className="space-y-6">
                        
                        {/* Name */}
                        <div className="space-y-2">
                            <label className="text-slate-400 text-xs uppercase tracking-wider font-bold ml-1">Member Name</label>
                            <input 
                                required
                                type="text" 
                                name="name"
                                value={formData.name}
                                onChange={handleChange}
                                className="w-full glass-input rounded-xl px-4 py-3.5 outline-none transition-all placeholder-slate-600"
                                placeholder="Enter member name"
                            />
                        </div>

                        {/* Size Selection */}
                        <div className="space-y-2">
                            <label className="text-slate-400 text-xs uppercase tracking-wider font-bold ml-1">T-Shirt Size</label>
                            <div className="flex flex-wrap gap-2">
                                {['S', 'M', 'L', 'XL', 'XXL', 'XXXL'].map(size => (
                                    <button
                                        key={size}
                                        type="button"
                                        onClick={() => setFormData({...formData, size})}
                                        className={`flex-1 min-w-[60px] py-3 rounded-xl text-sm font-bold transition-all border ${
                                            formData.size === size 
                                            ? 'bg-blue-600/90 border-blue-500 text-white shadow-lg shadow-blue-500/20' 
                                            : 'bg-slate-800/40 border-slate-700 text-slate-400 hover:bg-slate-700 hover:border-slate-600'
                                        }`}
                                    >
                                        {size}
                                    </button>
                                ))}
                            </div>
                        </div>

                        {/* Payment Toggle */}
                        <div className="space-y-2">
                            <label className="text-slate-400 text-xs uppercase tracking-wider font-bold ml-1">Payment Method</label>
                            <div className="grid grid-cols-2 gap-3 bg-slate-900/50 p-1.5 rounded-xl border border-slate-800">
                                <button
                                    type="button"
                                    onClick={() => setFormData({...formData, paymentType: 'full'})}
                                    className={`py-3 rounded-lg text-sm font-bold transition-all ${
                                        formData.paymentType === 'full' 
                                        ? 'bg-emerald-600 text-white shadow-lg' 
                                        : 'text-slate-400 hover:text-white'
                                    }`}
                                >
                                    Full Payment
                                </button>
                                <button
                                    type="button"
                                    onClick={() => setFormData({...formData, paymentType: 'advance'})}
                                    className={`py-3 rounded-lg text-sm font-bold transition-all ${
                                        formData.paymentType === 'advance' 
                                        ? 'bg-amber-600 text-white shadow-lg' 
                                        : 'text-slate-400 hover:text-white'
                                    }`}
                                >
                                    Advance
                                </button>
                            </div>
                        </div>

                        {/* Advance Logic */}
                        <AnimatePresence>
                            {formData.paymentType === 'advance' && (
                                <motion.div 
                                    initial={{ height: 0, opacity: 0 }}
                                    animate={{ height: 'auto', opacity: 1 }}
                                    exit={{ height: 0, opacity: 0 }}
                                    className="overflow-hidden"
                                >
                                    <div className="bg-amber-500/5 border border-amber-500/20 rounded-xl p-5 mt-2">
                                        <div className="flex flex-col gap-4">
                                            <label className="flex items-center gap-3 cursor-pointer p-3 rounded-lg hover:bg-amber-500/10 transition">
                                                <div className={`w-5 h-5 rounded-full border-2 flex items-center justify-center ${formData.advanceOption === '700' ? 'border-amber-500' : 'border-slate-600'}`}>
                                                    {formData.advanceOption === '700' && <div className="w-2.5 h-2.5 rounded-full bg-amber-500"></div>}
                                                </div>
                                                <input type="radio" name="advanceOption" value="700" checked={formData.advanceOption === '700'} onChange={handleChange} className="hidden" />
                                                <span className="text-slate-200 font-medium">Rs. 700.00</span>
                                            </label>

                                            <label className="flex flex-col gap-2 cursor-pointer p-3 rounded-lg hover:bg-amber-500/10 transition">
                                                <div className="flex items-center gap-3">
                                                    <div className={`w-5 h-5 rounded-full border-2 flex items-center justify-center ${formData.advanceOption === 'custom' ? 'border-amber-500' : 'border-slate-600'}`}>
                                                        {formData.advanceOption === 'custom' && <div className="w-2.5 h-2.5 rounded-full bg-amber-500"></div>}
                                                    </div>
                                                    <input type="radio" name="advanceOption" value="custom" checked={formData.advanceOption === 'custom'} onChange={handleChange} className="hidden" />
                                                    <span className="text-slate-200 font-medium">Custom Amount</span>
                                                </div>
                                                
                                                {formData.advanceOption === 'custom' && (
                                                    <motion.input
                                                        initial={{ opacity: 0, y: -5 }}
                                                        animate={{ opacity: 1, y: 0 }}
                                                        type="number"
                                                        name="customAmount"
                                                        value={formData.customAmount}
                                                        onChange={handleChange}
                                                        placeholder="Enter Amount (Rs)"
                                                        className="ml-8 w-[calc(100%-2rem)] glass-input rounded-lg px-3 py-2 text-sm focus:border-amber-500"
                                                    />
                                                )}
                                            </label>
                                        </div>
                                    </div>
                                </motion.div>
                            )}
                        </AnimatePresence>

                        <button 
                            disabled={loading}
                            className="w-full bg-gradient-to-br from-blue-600 to-indigo-700 hover:from-blue-500 hover:to-indigo-600 text-white font-bold py-4 rounded-xl shadow-lg shadow-blue-900/20 transform transition active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center gap-2 mt-4"
                        >
                            {loading ? <span className="animate-spin h-5 w-5 border-2 border-white/30 border-t-white rounded-full"></span> : <><Icons.Save /> Register Order</>}
                        </button>

                        {msg && (
                            <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className={`p-3 rounded-lg text-center text-sm font-semibold ${msg.type === 'success' ? 'bg-green-500/10 text-green-400 border border-green-500/20' : 'bg-red-500/10 text-red-400 border border-red-500/20'}`}>
                                {msg.text}
                            </motion.div>
                        )}
                    </form>
                </motion.div>
            );
        }

        // --- Order List & Exports ---
        function OrderList() {
            const [orders, setOrders] = useState([]);
            const [loading, setLoading] = useState(true);
            const tableRef = useRef(null);
            const factoryTableRef = useRef(null);

            useEffect(() => {
                fetchOrders();
            }, []);

            const fetchOrders = async () => {
                const { data } = await supabase.from('orders').select('*').order('id', { ascending: false });
                if (data) setOrders(data);
                setLoading(false);
            };

            // --- CSV Export ---
            const downloadCSV = () => {
                const headers = ["ID", "Date", "Name", "Size", "Type", "Amount"];
                const csvContent = "data:text/csv;charset=utf-8," 
                    + headers.join(",") + "\n"
                    + orders.map(r => `${r.id},${new Date(r.created_at).toLocaleDateString()},${r.name},${r.size},${r.payment_type},${r.amount}`).join("\n");
                const link = document.createElement("a");
                link.setAttribute("href", encodeURI(csvContent));
                link.setAttribute("download", "DreamMakers_Orders.csv");
                document.body.appendChild(link);
                link.click();
                link.remove();
            };

            // --- PDF Export ---
            const downloadPDF = async () => {
                const doc = new jsPDF();
                
                // Add Logo
                try {
                    const base64Logo = await getBase64ImageFromURL(LOGO_URL);
                    doc.addImage(base64Logo, 'JPEG', 14, 10, 20, 20); // x, y, w, h
                } catch (e) {
                    console.warn("Logo load failed for PDF", e);
                }

                // Header Text
                doc.setFont("helvetica", "bold");
                doc.setFontSize(22);
                doc.setTextColor(41, 128, 185); // Blue color
                doc.text("Dream Makers", 40, 20);
                
                doc.setFontSize(12);
                doc.setTextColor(100);
                doc.text("Sport & Youth Club - T-Shirt Orders", 40, 28);
                
                doc.setDrawColor(200);
                doc.line(14, 35, 196, 35); // Horizontal line

                // Table
                const tableColumn = ["ID", "Date", "Name", "Size", "Payment", "Amount (Rs)"];
                const tableRows = orders.map(order => [
                    order.id,
                    new Date(order.created_at).toLocaleDateString('en-GB'),
                    order.name,
                    order.size,
                    order.payment_type === 'full' ? 'Full' : 'Advance',
                    order.amount + '.00'
                ]);

                doc.autoTable({
                    head: [tableColumn],
                    body: tableRows,
                    startY: 40,
                    theme: 'grid',
                    headStyles: { fillColor: [41, 128, 185], textColor: 255, fontStyle: 'bold' },
                    alternateRowStyles: { fillColor: [240, 248, 255] },
                    styles: { font: "helvetica", fontSize: 10, cellPadding: 3 },
                    foot: [['', '', '', 'Total', '', orders.reduce((sum, item) => sum + item.amount, 0) + '.00']],
                    footStyles: { fillColor: [220, 220, 220], textColor: 0, fontStyle: 'bold' }
                });

                doc.save("DreamMakers_Report.pdf");
            };

            // --- JPG Export (Full System View) ---
            const downloadJPG = async () => {
                if(!tableRef.current) return;
                const canvas = await html2canvas(tableRef.current, {
                    backgroundColor: "#1e293b", // Dark background match
                    scale: 2 // High res
                });
                const image = canvas.toDataURL("image/jpeg", 1.0);
                const link = document.createElement("a");
                link.href = image;
                link.download = "DreamMakers_FullTable.jpg";
                link.click();
            };

            // --- Factory List Export (Name & Size Only) ---
            const downloadFactoryJPG = async () => {
                if(!factoryTableRef.current) return;
                const canvas = await html2canvas(factoryTableRef.current, {
                    backgroundColor: "#ffffff", // White background for printing
                    scale: 2 // High res
                });
                const image = canvas.toDataURL("image/jpeg", 1.0);
                const link = document.createElement("a");
                link.href = image;
                link.download = "DreamMakers_FactoryList.jpg";
                link.click();
            };

            return (
                <motion.div 
                    initial={{ scale: 0.95, opacity: 0 }}
                    animate={{ scale: 1, opacity: 1 }}
                    exit={{ scale: 0.95, opacity: 0 }}
                    className="glass-panel rounded-2xl p-6 md:p-8"
                >
                    <div className="flex flex-col xl:flex-row justify-between items-center mb-8 gap-6">
                        <div>
                            <h2 className="text-2xl font-bold text-white flex items-center gap-2">
                                <Icons.List /> Order List
                            </h2>
                            <p className="text-slate-400 text-sm mt-1">Total Orders: <span className="text-blue-400 font-bold">{orders.length}</span></p>
                        </div>
                        
                        <div className="flex flex-wrap justify-center gap-2">
                            <ActionButton onClick={downloadCSV} color="emerald" icon={<Icons.Sheet />} label="CSV" />
                            <ActionButton onClick={downloadPDF} color="rose" icon={<Icons.FileText />} label="PDF" />
                            <ActionButton onClick={downloadJPG} color="sky" icon={<Icons.Image />} label="System JPG" />
                            <ActionButton onClick={downloadFactoryJPG} color="orange" icon={<Icons.Scissors />} label="Factory JPG" />
                        </div>
                    </div>

                    {/* Main UI Table */}
                    <div className="overflow-hidden rounded-xl border border-slate-700/50" ref={tableRef}>
                        <div className="overflow-x-auto">
                            <table className="w-full text-left border-collapse bg-[#1e293b]">
                                <thead>
                                    <tr className="bg-slate-800/80 text-slate-400 text-xs uppercase tracking-wider font-semibold border-b border-slate-700">
                                        <th className="p-4">ID</th>
                                        <th className="p-4">Date</th>
                                        <th className="p-4">Name</th>
                                        <th className="p-4">Size</th>
                                        <th className="p-4">Status</th>
                                        <th className="p-4 text-right">Amount</th>
                                    </tr>
                                </thead>
                                <tbody className="divide-y divide-slate-700/50 text-sm">
                                    {loading ? (
                                        <tr><td colSpan="6" className="p-8 text-center text-slate-500 animate-pulse">Loading Data...</td></tr>
                                    ) : orders.length === 0 ? (
                                        <tr><td colSpan="6" className="p-8 text-center text-slate-500">No data available.</td></tr>
                                    ) : (
                                        orders.map((order, index) => (
                                            <tr key={order.id} className={`hover:bg-slate-700/30 transition-colors ${index % 2 === 0 ? 'bg-slate-800/20' : ''}`}>
                                                <td className="p-4 font-mono text-slate-500">#{order.id}</td>
                                                <td className="p-4 text-slate-400">{new Date(order.created_at).toLocaleDateString('en-GB')}</td>
                                                <td className="p-4 font-semibold text-slate-200">{order.name}</td>
                                                <td className="p-4">
                                                    <span className="inline-flex items-center justify-center w-8 h-8 rounded-full bg-slate-700 text-slate-300 text-xs font-bold border border-slate-600">
                                                        {order.size}
                                                    </span>
                                                </td>
                                                <td className="p-4">
                                                    <span className={`px-2.5 py-1 rounded-full text-xs font-bold border ${
                                                        order.payment_type === 'full' 
                                                        ? 'bg-emerald-500/10 text-emerald-400 border-emerald-500/20' 
                                                        : 'bg-amber-500/10 text-amber-400 border-amber-500/20'
                                                    }`}>
                                                        {order.payment_type === 'full' ? 'Full' : 'Advance'}
                                                    </span>
                                                </td>
                                                <td className="p-4 text-right font-mono text-slate-300">
                                                    Rs. {order.amount}
                                                </td>
                                            </tr>
                                        ))
                                    )}
                                </tbody>
                            </table>
                        </div>
                        {/* Table Footer Stats */}
                        {!loading && orders.length > 0 && (
                            <div className="bg-slate-800/80 p-4 border-t border-slate-700 flex justify-end gap-6 text-sm">
                                <span className="text-slate-400">Total Collection:</span>
                                <span className="text-emerald-400 font-bold font-mono text-lg">
                                    Rs. {orders.reduce((acc, curr) => acc + curr.amount, 0).toLocaleString()}.00
                                </span>
                            </div>
                        )}
                    </div>

                    {/* Hidden Factory Table (Used for generating JPG only) */}
                    <div id="factory-table-capture" ref={factoryTableRef}>
                        <div style={{ textAlign: 'center', marginBottom: '20px', borderBottom: '2px solid #000', paddingBottom: '10px' }}>
                            <h1 style={{ fontSize: '24px', fontWeight: 'bold', textTransform: 'uppercase' }}>Dream Makers - Factory List</h1>
                            <p style={{ fontSize: '14px', color: '#555' }}>T-Shirt Order Details (Name & Size Only)</p>
                            <p style={{ fontSize: '12px', marginTop: '5px' }}>Date Generated: {new Date().toLocaleDateString('en-GB')}</p>
                        </div>
                        <table style={{ width: '100%', borderCollapse: 'collapse', fontSize: '14px' }}>
                            <thead>
                                <tr style={{ background: '#f0f0f0', borderBottom: '2px solid #333' }}>
                                    <th style={{ padding: '10px', textAlign: 'left', border: '1px solid #ddd' }}>No</th>
                                    <th style={{ padding: '10px', textAlign: 'left', border: '1px solid #ddd' }}>Name</th>
                                    <th style={{ padding: '10px', textAlign: 'center', border: '1px solid #ddd' }}>Size</th>
                                </tr>
                            </thead>
                            <tbody>
                                {orders.map((order, idx) => (
                                    <tr key={order.id} style={{ borderBottom: '1px solid #eee' }}>
                                        <td style={{ padding: '8px', border: '1px solid #ddd', width: '50px' }}>{idx + 1}</td>
                                        <td style={{ padding: '8px', border: '1px solid #ddd', fontWeight: 'bold' }}>{order.name}</td>
                                        <td style={{ padding: '8px', border: '1px solid #ddd', textAlign: 'center', fontWeight: 'bold' }}>{order.size}</td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                        <div style={{ marginTop: '20px', textAlign: 'right', fontSize: '14px', fontWeight: 'bold' }}>
                            Total Count: {orders.length}
                        </div>
                    </div>

                </motion.div>
            );
        }

        function ActionButton({ onClick, color, icon, label }) {
            const colors = {
                emerald: "bg-emerald-600 hover:bg-emerald-500 shadow-emerald-500/20",
                rose: "bg-rose-600 hover:bg-rose-500 shadow-rose-500/20",
                sky: "bg-sky-600 hover:bg-sky-500 shadow-sky-500/20",
                orange: "bg-orange-600 hover:bg-orange-500 shadow-orange-500/20"
            };

            return (
                <button 
                    onClick={onClick}
                    className={`${colors[color]} text-white px-4 py-2 rounded-lg flex items-center gap-2 text-xs font-bold shadow-lg transition-all hover:-translate-y-0.5 whitespace-nowrap`}
                >
                    {icon} {label}
                </button>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
